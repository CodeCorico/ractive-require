/*! Ractive-Require (0.6.10). (C) 2016 CodeCorico. MIT @license: en.wikipedia.org/wiki/MIT_License */
!function(){"use strict";var e;e="undefined"!=typeof XMLHttpRequest?function(e){return new window.Ractive.Promise(function(n,t){var r,i,o;r=new XMLHttpRequest,r.open("GET",e),i=function(){4!==r.readyState||o||(n(r.responseText),o=!0)},r.onload=r.onreadystatechange=i,r.onerror=t,r.send(),4===r.readyState&&i()})}:function(e){return new window.Ractive.Promise(function(n,t){require("fs").readFile(e,function(e,r){return e?t(e):void n(r.toString())})})},window.Ractive.getHtml=e}(),function(){"use strict";function e(n,t,r,i,o,a,u){a<n.length?n[a](t,r,i,o,function(){e(n,t,r,i,o,++a,u)}):u&&u()}var n={};window.Ractive.controller=function(e,t){n[e]=n[e]||[],"function"==typeof t&&n[e].push(t)},window.Ractive.fireController=function(t,r,i,o,a,u,c){c=c===!1?c:(c||0)+1,n[t]?e(n[t],r,i,o,a,0,u):c!==!1&&c<500?setTimeout(function(){window.Ractive.fireController(t,r,i,o,a,u,c)},10):u&&u()}}(),function(){"use strict";function e(e,n){var t=e.getAttribute("src")||!1,r=e.getAttribute("target");return r?t?void window.Ractive.getHtml(t).then(function(e){e=i(e,t),n(r,e)}):void n(r,e.innerHTML):n(!1)}function n(n,t){return new window.Ractive.Promise(function(r){var i,o={},a=n.querySelectorAll("rv-partial"),u=a.length;for(i in t.partials)o[i]=t.partials[i];return u?void Array.prototype.map.call(a,function(n){e(n,function(e,n){e&&(o[e]=n),--u,u<1&&r(o)})}):r(o)})}function t(e,n,t){return e=e||{},n.split("-").forEach(function(n){n&&(e[n]=t)}),e}function r(e,n){for(var r,i,o={data:{},bindsParents:{},bindsChildren:{},events:{},listening:{}},a=0;a<e.attributes.length;a++)r=e.attributes[a],0===r.name.indexOf("data-on-")?(i=r.name.substr(8,r.name.length-8),o.events=t(o.events,i,r.value)):0===r.name.indexOf("data-listen-")?(i=r.name.substr(12,r.name.length-12),o.listening=t(o.listening,i,r.value)):0===r.name.indexOf("data-bind-")?(i=r.name.substr(10,r.name.length-10),o.data[i]=n.get(r.value),o.bindsParents[i]=r.value,o.bindsChildren[i]=r.value):0===r.name.indexOf("data-bindparent-")?(i=r.name.substr(16,r.name.length-16),o.data[i]=n.get(r.value),o.bindsParents[i]=r.value):0===r.name.indexOf("data-bindchild-")?(i=r.name.substr(15,r.name.length-15),o.bindsChildren[i]=r.value):0===r.name.indexOf("data-")&&(i=r.name.substr(5,r.name.length-5),o.data[i]=r.value);return o}function i(e,n){var t=n.split("/"),r=document.createElement("a"),i=window.location.protocol+"//"+window.location.host;return e.replace(/[^-]src="(.*?)"/g,function(e,n){return 0===n.indexOf("{")||0===n.indexOf("/")||0===n.indexOf("http://")||0===n.indexOf("https://")?e:(t.pop(),t.push(n),r.href=t.join("/"),e.replace(n,r.href.substr(i.length,r.href.length-i.length)))})}function o(e,n,t,r){return e.observe(r,function(e){n.set(t,e)})}function a(e,n,t,r){var i=[];if(e.childrenRequire&&e.childrenRequire.length)for(var o=0;o<e.childrenRequire.length;o++){if(e.childrenRequire[o].el.getAttribute(n)==t){if(r)return e.childrenRequire[o];i.push(e.childrenRequire[o])}var u=a(e.childrenRequire[o],n,t,r);if(r&&u)return u;!r&&u.length&&(i=i.concat(u))}return r?null:i}function u(e,n,t,r){var i=[];if(e.parentRequire){if(e.parentRequire.el.getAttribute(n)==t){if(r)return e.parentRequire;i.push(e.parentRequire)}var o=u(e.parentRequire,n,t,r);if(r&&o)return o;!r&&o.length&&(i=i.concat(o))}return r?null:i}function c(e,n,t,r){var i=e.className||"",o=[];i.split(" ").map(function(e){e=e.trim(),!e||(t||r)&&e==n||o.push(e)}),t&&o.push(n),e.className=o.join(" ")}function l(e,n){c(e,n,!0)}function d(e,n){c(e,n,!1,!0)}function f(e,t,c,v,p){v=v||!1;var w=t.getAttribute("src"),R=t.getAttribute("name"),m=v||"true"==t.getAttribute("no-script"),q=p||"true"==t.getAttribute("no-css");if(!w)throw new Error('nv-require needs to have a "src" attrbute');if(!R)throw new Error('nv-require needs to have a "name" attrbute');if(t.setAttribute("loaded","true"),l(t,"rv-require-loaded"),!window.Ractive.templates[R])return q?m?void window.Ractive.getHtml(w+".html").then(function(n){n=i(n,w),window.Ractive.templates[R]=n,f(e,t,c)}):window.Ractive.require(w+".js").then(function(){f(e,t,c,!0,q)}):window.Ractive.require(w+".css").then(function(){f(e,t,c,m,!0)});var b=window.Ractive.templates[R],y=r(t,e),A=t.innerHTML;n(t,e).then(function(n){t.innerHTML="",window.Ractive.fireController(R,function(r){if(r=r||{},r.el=r.el||t,r.template=r.template||b,r.partials){var i;for(i in r.partials)n[i]=r.partials[i]}r.partials=n,r.parentRequire=e;var c,l=new window.Ractive(r),f=[];for(c in y.bindsParents)f.push(o(e,l,c,y.bindsParents[c]));for(c in y.bindsChildren)f.push(o(l,e,y.bindsChildren[c],c));l.on("unrender",function(){t.removeAttribute("loaded"),d(t,"rv-require-loaded"),l.parentRequire=null;var n;if(f&&f.length)for(n=0;n<f.length;n++)f[n].cancel();if(f=null,e&&e.childrenRequire)for(n=0;n<e.childrenRequire.length;n++)if(e.childrenRequire[n]===l){e.childrenRequire.splice(n,1);break}if(l.childrenRequire&&l.childrenRequire.length)for(n=l.childrenRequire.length-1;n>=0;n--)l.childrenRequire[n].teardown();for(n=0;n<g.length;n++)if(g[n]==l){g.splice(n,1);break}}),l.on("teardown",function(){t.innerHTML=A}),l.childrenRequire=[];var v=[l];return e.findParents||v.push(e),v.forEach(function(e){e.findParents=function(n,t){return u(e,n,t)},e.findParent=function(n,t){return u(e,n,t,!0)},e.findChildren=function(n,t){return a(e,n,t)},e.findChild=function(n,t){return a(e,n,t,!0)}}),s(e,l,y),h(e,l,y),e.childrenRequire.push(l),g.push(l),l},y.data,t,{template:b,partials:n},function(){c&&c()})})}function s(e,n,t){var r=t.listening,i=function(t){e.on(r[t],function(){Array.prototype.unshift.call(arguments,t,r[t]),n.fire.apply(n,arguments)})};for(var o in r)r.hasOwnProperty(o)&&i(o)}function h(e,n,t){var r=function(t,r){n.on(t,function(){Array.prototype.unshift.call(arguments,r,n),e.fire.apply(e,arguments)})};for(var i in t.events)t.events.hasOwnProperty(i)&&r(i,t.events[i])}function v(e,n){return e.parentNode==n||"rv-require"!=e.parentNode.tagName.toLowerCase()&&v(e.parentNode,n)}function p(e,n,t,r){if(e=e.split("/").pop(),window.Ractive.injects.indexOf(e)>-1)return r();var i=t();i.onload=r,i.onerror=function(e){m(e),r()},window.Ractive.injects.push(e),document.getElementsByTagName("head")[0].appendChild(i)}function w(e,n,t){p(e,n,function(){var e=document.createElement("script");return e.type="text/javascript",e.src=n,e},t)}function R(e,n,t){p(e,n,function(){var e=document.createElement("link");return e.rel="stylesheet",e.href=n,e},t)}function m(e){q.forEach(function(n){n(e)})}var g=[];window.Ractive.templates=window.Ractive.templates||{},window.Ractive.injects=window.Ractive.injects||[],window.Ractive.require=function(e,n){var t=null;if(!e)throw new Error("You have to specify a file/name");return n=n||e,t=(n.split(".").pop()||"").toLowerCase(),"js"==t?new window.Ractive.Promise(function(t){w(e,n,t)}):"css"==t?new window.Ractive.Promise(function(t){R(e,n,t)}):void 0};var q=[];window.Ractive.require.onError=function(e){q.push(e)},window.Ractive.require.offError=function(e){e=e.toString();for(var n=q.length-1;n>=0;n--)q[n].toString()==e&&q.splice(n,1)},window.Ractive.findRequireByEl=function(e){for(var n=0;n<g.length;n++)if(g[n].el==e)return g[n];return null},window.Ractive.prototype.require=function(e){e=e||null;var n=this;return this.childrenRequire=this.childrenRequire||[],new window.Ractive.Promise(function(t){function r(){setTimeout(function(){for(var e=n.childrenRequire.length-1;e>=0;e--)n.childrenRequire[e].el.parentNode||n.childrenRequire[e].teardown()}),t()}var i=e?n.el.querySelectorAll('rv-require[src][ondemand="'+e+'"]:not([loaded="true"])'):n.el.querySelectorAll('rv-require[src]:not([loaded="true"]):not([ondemand])'),o=i.length;return o<1?r():void[].forEach.call(i,function(e){v(e,n.el)?f(n,e,function(){--o,o<1&&r()}):(--o,o<1&&r())})})}}();
//# sourceMappingURL=ractive-require.min.js.map