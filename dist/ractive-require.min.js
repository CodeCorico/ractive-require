/*! Ractive-Require (0.5.4). (C) 2015 CodeCorico. MIT @license: en.wikipedia.org/wiki/MIT_License */
!function(){"use strict";var e;e="undefined"!=typeof XMLHttpRequest?function(e){return new window.Ractive.Promise(function(t,n){var r,i,o;r=new XMLHttpRequest,r.open("GET",e),i=function(){4!==r.readyState||o||(t(r.responseText),o=!0)},r.onload=r.onreadystatechange=i,r.onerror=n,r.send(),4===r.readyState&&i()})}:function(e){return new window.Ractive.Promise(function(t,n){require("fs").readFile(e,function(e,r){return e?n(e):void t(r.toString())})})},window.Ractive.getHtml=e}(),function(){"use strict";function e(t,n,r,i,o,a,u){a<t.length?t[a](n,r,i,o,function(){e(t,n,r,i,o,++a,u)}):u&&u()}var t={};window.Ractive.controller=function(e,n){t[e]=t[e]||[],"function"==typeof n&&t[e].push(n)},window.Ractive.fireController=function(n,r,i,o,a,u,c){c=c===!1?c:(c||0)+1,t[n]?e(t[n],r,i,o,a,0,u):c!==!1&&500>c?setTimeout(function(){window.Ractive.fireController(n,r,i,o,a,u,c)},10):u&&u()}}(),function(){"use strict";function e(e,t){var n=e.getAttribute("src")||!1,i=e.getAttribute("target"),o=e.getAttribute("cache")||"false";return i?n?void("true"==o&&window.Ractive.rv_partials[controllerName].hasOwnProperty(i)?t(i,window.Ractive.rv_partials[controllerName][i]):window.Ractive.getHtml(n).then(function(e){e=r(e,n),"true"==o&&(window.Ractive.rv_partials[controllerName][i]=e),t(i,e)})):void t(i,e.innerHTML):t(!1)}function t(t,n){return new window.Ractive.Promise(function(r){var i,o={},a=t.querySelectorAll("rv-partial"),u=t.getAttribute("name"),c=a.length;for(i in n.partials)o[i]=n.partials[i];return c?void Array.prototype.map.call(a,function(t){e(t,u,function(e,t){e&&(o[e]=t),--c,1>c&&r(o)})}):r(o)})}function n(e,t){for(var n,r,i={},o={},a=0;a<e.attributes.length;a++)n=e.attributes[a],0===n.name.indexOf("data-bind-")?(r=n.name.substr(10,n.name.length-10),i[r]=t.get(n.value),o[r]=n.value):0===n.name.indexOf("data-")&&(r=n.name.substr(5,n.name.length-5),i[r]=n.value);return{data:i,binds:o}}function r(e,t){var n=t.split("/"),r=document.createElement("a"),i=window.location.protocol+"//"+window.location.host;return e.replace(/[^-]src="(.*?)"/g,function(e,t){return 0===t.indexOf("{")||0===t.indexOf("/")||0===t.indexOf("http://")||0===t.indexOf("https://")?e:(n.pop(),n.push(t),r.href=n.join("/"),e.replace(t,r.href.substr(i.length,r.href.length-i.length)))})}function i(e,t,n,r){return e.observe(r,function(e){t.set(n,e)})}function o(e,t,n,r){var i=[];if(e.childrenRequire&&e.childrenRequire.length)for(var a=0;a<e.childrenRequire.length;a++){if(e.childrenRequire[a].el.getAttribute(t)==n){if(r)return e.childrenRequire[a];i.push(e.childrenRequire[a])}var u=o(e.childrenRequire[a],t,n,r);if(r&&u)return u;!r&&u.length&&(i=i.concat(u))}return r?null:i}function a(e,t,n,r){var i=[];if(e.parentRequire){if(e.parentRequire.el.getAttribute(t)==n){if(r)return e.parentRequire;i.push(e.parentRequire)}var o=a(e.parentRequire,t,n,r);if(r&&o)return o;!r&&o.length&&(i=i.concat(o))}return r?null:i}function u(e,t,n,r){var i=e.className||"",o=[];i.split(" ").map(function(e){e=e.trim(),!e||(n||r)&&e==t||o.push(e)}),n&&o.push(t),e.className=o.join(" ")}function c(e,t){u(e,t,!0)}function l(e,t){u(e,t,!1,!0)}function d(e,u,f,s,w){s=s||!1;var v=u.getAttribute("src"),h=u.getAttribute("name"),p=s||"true"==u.getAttribute("no-script"),R=w||"true"==u.getAttribute("no-css");if(!v)throw new Error('nv-require needs to have a "src" attrbute');if(!h)throw new Error('nv-require needs to have a "name" attrbute');if(u.setAttribute("loaded","true"),c(u,"rv-require-loaded"),!window.Ractive.templates[h])return R?p?void window.Ractive.getHtml(v+".html").then(function(t){t=r(t,v),window.Ractive.templates[h]=t,window.Ractive.rv_partials[h]={},d(e,u,f)}):window.Ractive.require(v+".js").then(function(){d(e,u,f,!0,R)}):window.Ractive.require(v+".css").then(function(){d(e,u,f,p,!0)});var m=window.Ractive.templates[h],q=n(u,e),g=u.innerHTML;t(u,e).then(function(t){u.innerHTML="",window.Ractive.fireController(h,function(n){if(n=n||{},n.el=n.el||u,n.template=n.template||m,n.partials){var r;for(r in n.partials)t[r]=n.partials[r]}n.partials=t,n.parentRequire=e;var c,d=new window.Ractive(n),f=[];for(c in q.binds)f.push(i(e,d,c,q.binds[c])),f.push(i(d,e,q.binds[c],c));d.on("unrender",function(){u.removeAttribute("loaded"),l(u,"rv-require-loaded"),d.parentRequire=null;var t;if(f&&f.length)for(t=0;t<f.length;t++)f[t].cancel();if(f=null,e&&e.childrenRequire)for(t=0;t<e.childrenRequire.length;t++)if(e.childrenRequire[t]===d){e.childrenRequire.splice(t,1);break}if(d.childrenRequire&&d.childrenRequire.length)for(t=d.childrenRequire.length-1;t>=0;t--)d.childrenRequire[t].teardown()}),d.on("teardown",function(){u.innerHTML=g}),d.childrenRequire=[];var s=[d];return e.findParents||s.push(e),s.forEach(function(e){e.findParents=function(t,n){return a(e,t,n)},e.findParent=function(t,n){return a(e,t,n,!0)},e.findChildren=function(t,n){return o(e,t,n)},e.findChild=function(t,n){return o(e,t,n,!0)}}),e.childrenRequire.push(d),d},q.data,u,{template:m,partials:t},function(){f&&f()})})}function f(e,t){return e.parentNode!=t?"rv-require"==e.parentNode.tagName.toLowerCase()?!1:f(e.parentNode,t):!0}function s(e,t,n,r){if(e=e.split("/").pop(),window.Ractive.injects.indexOf(e)>-1)return r();var i=n();i.onload=r,window.Ractive.injects.push(e),document.getElementsByTagName("head")[0].appendChild(i)}function w(e,t,n){s(e,t,function(){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e},n)}function v(e,t,n){s(e,t,function(){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e},n)}window.Ractive.templates=window.Ractive.templates||{},window.Ractive.injects=window.Ractive.injects||[],window.Ractive.rv_partials=window.Ractive.rv_partials||{},window.Ractive.require=function(e,t){var n=null;if(!e)throw new Error("You have to specify a file/name");return t=t||e,n=(t.split(".").pop()||"").toLowerCase(),"js"==n?new window.Ractive.Promise(function(n){w(e,t,n)}):"css"==n?new window.Ractive.Promise(function(n){v(e,t,n)}):void 0},window.Ractive.prototype.require=function(e){e=e||null;var t=this;return this.childrenRequire=this.childrenRequire||[],new window.Ractive.Promise(function(n){var r=e?t.el.querySelectorAll('rv-require[src][ondemand="'+e+'"]:not([loaded="true"])'):t.el.querySelectorAll('rv-require[src]:not([loaded="true"]):not([ondemand])'),i=r.length;return 1>i?n():void[].forEach.call(r,function(e){f(e,t.el)?d(t,e,function(){--i,1>i&&n()}):(--i,1>i&&n())})})}}();
//# sourceMappingURL=ractive-require.min.js.map