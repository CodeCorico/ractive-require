!function(){"use strict";var e;e="undefined"!=typeof XMLHttpRequest?function(e){return new window.Ractive.Promise(function(t,n){var r,i,a;r=new XMLHttpRequest,r.open("GET",e),i=function(){4!==r.readyState||a||(t(r.responseText),a=!0)},r.onload=r.onreadystatechange=i,r.onerror=n,r.send(),4===r.readyState&&i()})}:function(e){return new window.Ractive.Promise(function(t,n){require("fs").readFile(e,function(e,r){return e?n(e):void t(r.toString())})})},window.Ractive.getHtml=e}(),function(){"use strict";function e(t,n,r,i,a,o){o=o||0,o<t.length&&t[o](n,r,i,a,function(){e(t,n,r,i,a,++o)})}var t={};window.Ractive.controller=function(e,n){t[e]=t[e]||[],"function"==typeof n&&t[e].push(n)},window.Ractive.fireController=function(n,r,i,a,o){t[n]&&e(t[n],r,i,a,o)}}(),function(){"use strict";function e(e,t){var n=e.getAttribute("src")||!1,i=e.getAttribute("target");return i?n?void window.Ractive.getHtml(n).then(function(e){e=r(e,n),t(i,e)}):void t(i,e.innerHTML):t(!1)}function t(t,n){return new window.Ractive.Promise(function(r){var i,a={},o=t.querySelectorAll("rv-partial"),u=o.length;for(i in n.partials)a[i]=n.partials[i];return u?void Array.prototype.map.call(o,function(t){e(t,function(e,t){e&&(a[e]=t),--u,1>u&&r(a)})}):r(a)})}function n(e,t){for(var n,r,i={},a=0;a<e.attributes.length;a++)n=e.attributes[a],0===n.name.indexOf("data-bind-")?(r=n.name.substr(10,n.name.length-10),i[r]=t.get(n.value)):0===n.name.indexOf("data-")&&(r=n.name.substr(5,n.name.length-5),i[r]=n.value);return i}function r(e,t){var n=t.split("/");return e.replace(/(rv\-require|rv\-partial).?src="(.*?)"/g,function(e,t,r){return n.pop(),n.push(r),e.replace(/src="(.*?)"/,'src="'+n.join("/")+'"')})}function i(e,a,o,u,c){u=u||!1;var l=a.getAttribute("src"),d=a.getAttribute("name"),s=u||"true"==a.getAttribute("no-script"),f=c||"true"==a.getAttribute("no-css");if(!l)throw new Error('nv-require needs to have a "src" attrbute');if(!d)throw new Error('nv-require needs to have a "name" attrbute');if(a.setAttribute("loaded","true"),!window.Ractive.templates[d]){if(!s){var v=document.createElement("script");return v.type="text/javascript",v.src=l+".js",v.onload=function(){i(e,a,o,!0,f)},void document.getElementsByTagName("head")[0].appendChild(v)}if(!f){var p=document.createElement("link");return p.rel="stylesheet",p.href=l+".css",p.onload=function(){i(e,a,o,s,!0)},void document.getElementsByTagName("head")[0].appendChild(p)}return void window.Ractive.getHtml(l+".html").then(function(t){t=r(t,l),window.Ractive.templates[d]=t,i(e,a,o)})}var w=window.Ractive.templates[d],m=n(a,e);t(a,e).then(function(t){a.innerHTML="",window.Ractive.fireController(d,function(n){if(n=n||{},n.el=n.el||a,n.template=n.template||w,n.partials){var r;for(r in n.partials)t[r]=n.partials[r]}n.partials=t,n.parentRequire=e;var i=new window.Ractive(n);return i.on("teardown",function(){i.parentRequire=null;for(var t=0;t<e.childrenRequire.length;t++)if(e.childrenRequire[t]===i){e.childrenRequire.splice(t,1);break}}),e.childrenRequire.push(i),i},m,a,{template:w,partials:t}),o&&o()})}function a(e,t){return e.parentNode!=t?"rv-require"==e.parentNode.tagName.toLowerCase()?!1:a(e.parentNode,t):!0}window.Ractive.templates=window.Ractive.templates||{},window.Ractive.prototype.require=function(e){e=e||null;var t=this;return this.childrenRequire=this.childrenRequire||[],new window.Ractive.Promise(function(n){var r=t.findAll(e?'rv-require[src][ondemand="'+e+'"]:not([loaded="true"])':'rv-require[src]:not([loaded="true"]):not([ondemand])'),o=r.length;return 1>o?n():void r.forEach(function(e){a(e,t.el)&&i(t,e,function(){--o,1>o&&n()})})})}}();
//# sourceMappingURL=ractive-require.min.js.map